<!DOCTYPE html>
<html>
<head>
    <title>Data Collection</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <h2>Citizen Data Collection</h2>

    <form method="POST">
            <div id="dc-error" class="form-error"></div>

            Age: <input type="number" id="age" name="age" required><br><br>

            Income: <input type="number" id="income" name="income" required><br><br>

            Children Count: <input type="number" id="children" name="children" required><br><br>

            Select Plan:
            <select name="plan" id="plan">
                <option value="SNAP">SNAP</option>
                <option value="CCAP">CCAP</option>
                <option value="Medicaid">Medicaid</option>
                <option value="Medicare">Medicare</option>
                <option value="QHP">QHP</option>
            </select><br><br>

            <button type="submit">Submit Data</button>
    </form>
        <script>
        (function(){
            const f = document.querySelector('form');
            const err = document.getElementById('dc-error');
            f.addEventListener('submit', function(e){
                err.innerText = '';
                const age = parseInt(document.getElementById('age').value || 0, 10);
                const income = parseFloat(document.getElementById('income').value || 0);
                const children = parseInt(document.getElementById('children').value || 0, 10);
                if(isNaN(age) || age < 0){ err.innerText='Enter a valid age'; err.style.color='red'; e.preventDefault(); return; }
                if(isNaN(income) || income < 0){ err.innerText='Enter a valid income'; err.style.color='red'; e.preventDefault(); return; }
                if(isNaN(children) || children < 0){ err.innerText='Enter valid number of children'; err.style.color='red'; e.preventDefault(); return; }
            });
        })();
        </script>
</body>
</html>
